//---------------------------------------------------------------
//
//  4190.308 Computer Architecture (Fall 2020)
//
//  Project #1: Compressing Data with Huffman Coding
//
//  September 9, 2020
//
//  Injae Kang (abcinje@snu.ac.kr)
//  Sunmin Jeong (sunnyday0208@snu.ac.kr)
//  Systems Software & Architecture Laboratory
//  Dept. of Computer Science and Engineering
//  Seoul National University
//
//---------------------------------------------------------------

#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#include "pa1-test.h"

#define TESTCASE(num, type)				\
	{						\
		.input = input##num,			\
		.input_type_len = sizeof(input##num),	\
		.ans = ans##num,			\
		.ans_len = sizeof(ans##num),		\
		.dtype = type				\
	}

// Test #0
char input0[] = {
	0xca, 0x20, 0x20,
};
char ans0[] = {
	0x02, 0xac, 0x13, 0x45, 0x26, 0x88, 0x20,
};

// Test #1
char input1[] = {
	0xde, 0xad, 0xbe, 0xef,
};
char ans1[] = {
	0xed, 0xab, 0xf0, 0x12, 0x32, 0x11, 0x60,
	0x40,
};

// Test #2
char input2[] = {
	0xab, 0x05, 0xef, 0x1a, 0xfb, 0x07, 0xd3, 0xb3,
	0x20, 0x87,
};
char ans2[] = {
	0x0b, 0x37, 0xaf, 0x12, 0x28, 0x23, 0x3f, 0x9a,
	0x89, 0x21, 0xf9, 0x15, 0x63, 0x6c,
};

// Test #3
char input3[] = "Injae Kang";
char ans3[] = {
	0x61, 0x4e, 0x02, 0x57, 0x65, 0xa0, 0xc6, 0xc1,
	0x15, 0x30, 0xb8, 0x08, 0x62, 0xc0,
};

// Test #4
char input4[] = "Be happy and smile :)";
char ans4[] = {
	0x60, 0x27, 0x91, 0x34, 0x7b, 0x43, 0x08, 0x8c,
	0x89, 0x65, 0x97, 0x08, 0x89, 0x1e, 0x16, 0x8b,
	0xa1, 0xd1, 0x03, 0x83, 0x08, 0xd6, 0x94, 0x00,
};

// Test #5
char input5[] = "The quick brown fox jumps over the lazy dog.";
char ans5[] = {
	0x67, 0x20, 0x5f, 0x48, 0x28, 0xa1, 0x62, 0x13,
	0x38, 0x30, 0x34, 0x32, 0x38, 0x98, 0x45, 0x09,
	0x24, 0x7d, 0x30, 0x04, 0x9b, 0x4c, 0x6c, 0xc0,
	0xf1, 0x67, 0x29, 0x89, 0x20, 0x41, 0x49, 0x9a,
	0x16, 0x21, 0x31, 0xd1, 0x83, 0xb3, 0xa4, 0xc5,
	0x09, 0x05, 0x7c,
};

// Test #6
int input6[] = {0, 1, 1, 2, 3, 5, 8};
char ans6[] = {
	0x01, 0x23, 0x58, 0x46, 0x20, 0x00, 0x00, 0x00,
	0x40, 0x00, 0x00, 0x40, 0x00, 0x00, 0x80, 0x00,
	0x00, 0xc0, 0x00, 0x01, 0x00, 0x00, 0x00, 0x90,
	0x00, 0x00,
};

// Test #7
int input7[] = {2020, 9, 20, 23, 59};
char ans7[] = {
	0x01, 0x47, 0x39, 0xbe, 0x0b, 0x41, 0x80, 0x00,
	0x90, 0x00, 0x00, 0xa0, 0x00, 0x00, 0xb0, 0x00,
	0x02, 0x28, 0x00, 0x00,
};

// Test #8
float input8[] = {3.141593, 2.718282};
char ans8[] = {
	0x04, 0x5d, 0xf2, 0x89, 0x57, 0xe1, 0x06, 0xc8,
	0x4a, 0x2a, 0x59, 0x00
};

// Test #9
float input9[] = {13528.600586, 129978.343750, 69890.148348, 113503.226562};
char ans9[] = {
	0xd4, 0x76, 0x81, 0x23, 0x76, 0x9d, 0x66, 0xcb,
	0xae, 0x81, 0xf0, 0x54, 0xdc, 0x4c, 0x41, 0x5a,
	0x1b, 0xf8, 0x05, 0x00,
};

// Testcases
int num_testcases = 10;
testcase tc[] = {
	TESTCASE(0, CHAR),
	TESTCASE(1, CHAR),
	TESTCASE(2, CHAR),
	TESTCASE(3, STRING),
	TESTCASE(4, STRING),
	TESTCASE(5, STRING),
	TESTCASE(6, INT),
	TESTCASE(7, INT),
	TESTCASE(8, FLOAT),
	TESTCASE(9, FLOAT),
};

void init_testcases(void)
{
	for (int i = 0; i < num_testcases; i++)
		switch (tc[i].dtype) {
		case CHAR:
		case INT:
		case FLOAT:
			tc[i].input_len = tc[i].input_type_len;
			break;
		case STRING:
			tc[i].input_len = strlen(tc[i].input);
			break;
		default:
			fprintf(stderr, "init_testcases() failed: Unknown datatype\n");
			exit(1);
		}
}
